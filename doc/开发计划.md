## 第一阶段
### 已完成的任务
* netty实现服务端与客户端通信
* Spring加载注册协议
* dispatcher应用分发器的实现，使用@HandlerAnno注解的地方可被反射调用
* 实现session的设计
* 客户端的用户登录与注册
* 使用slf4j打印日志
* 设计一个完善的日志系统
* 静态资源映射的实现
* 实现不同的玩家登陆同一个服务器会踢掉另外的
* 设计玩家的实体
* 使每个单独的客户端的session是同一个
* 切换地图
* 构建场景
* 增加唯一标识id 的持久化功能 功能id和now，即从这个数字开始递增 需要解决并发问题
* LengthFieldBasedFrameDecoder 的原理是什么
* 需要完善心跳
* 客户端关闭服务端会出现异常等待客户端连接
* 做一个线程池来统一处理登录登出时服务器缓存的数据
* 昵称不重名
* 实现错误码提示：可以放在静态资源中，并且客户端也可以实现
* 考虑合服 不光账号Id，objectId也需要不重复
* 在顶号的逻辑中，由于客户端是单线程运行的，所以当接收到logout的通知时
，需要等待其他的逻辑执行完才会执行logout的逻辑，所以需要客户端多线程执行logout

### 待解决的问题

## 第二阶段
### 已完成
* 需要实现基本的添加道具、移除道具、背包是否已满、查询某个物品数量等基本功能
* 穿戴装备 卸下装备
* 需要实现穿装备、脱装备、装备替换、查看装备信息等基础功能
  需要支持穿戴要求，不满足条件的装备无法穿戴
* 支持玩家属性,包括一级属性、二级属性、百分比属性
    多个模块时需要有对属性管理的机制
* 装备升阶使得装备变强，增加装备属性、消耗对应的道具
* 装备升级
* 查看装备的强化等级
* 道具
* 玩家连续升属性没有解决问题
如果服务器挂过 定时器有没有定时
登录的时候药效还没过再
如果服务器没有挂过
登录的时候药效还没过再
* 添加道具的时候为无缘无故的复制一个道具即道具id会 +1
* 如果使用有时效的药 那么如果服务器重启就会让玩家永久获得药剂的
* 每次登陆的时候判断了，在线也定时
* 如果登陆的时候药效还没过 怎么判断定时器有没有效果
* 如果用了一个药品紧接着再用一个怎么叠加有效时间
  一级属性和二级属性放在一个map中可能不太好，需要新建一个map专门存放 百分比属性
  一级属性和二级属性的关联问题
  百分比属性和二级属性的关联问题
* 添加超过堆叠上限的时候会有问题
* 查看背包中道具的详细信息
* 使用有时效性的物品
* 将消耗品归为一类
* 玩家离线后，一般不对玩家做操作
* 使用条件的多态，条件可能会有很多，所以在抽象方法中加一个属性为map的对象，可以灵活传参
* 模块需要划分模块 属性没有做
* 直接添加道具到背包有问题，这样就不算是是游戏了
* 改成单角色'
* 定时器实现
* 完善线程池（已完成，需要再看看有什么问题）
* 让有时效性的道具具有良好的扩展性
* cancelCommand
* 不可变属性(完成了需要检查)
* 现在的装备的强化属性是每升一级加一定的属性  而一刀是根据强化等级来确定属性的，即每一集都有一个强化等级对应一个强化属性
  升阶属性是直接换成另一件装备
* 每次玩家登陆的时候刷新
* 模块划分很重要，注意，不要光看内外代码，要有自己的思路
* addItem 写了两个方法 看那个写的好一点
* use item 的时候没有判断背包中道具的数量
### 待解决
* 移除道具
缓存需要定时保存数据



## 第三阶段

### 开发过程中遇到的问题
* 最大目标数:使用技能必须指定目标 ，如果有范围性的技能则 根据目标位置查找附近的目标 (ok)
* 技能cd（ok）
* 使用距离和使用范围（ok ） （需要根据需求来设定使用距离和范围）
* 使用 无目标的技能 即目标为自己（OK）
* 判断蓝量是否充足(OK  需要确认)
* 升级了普功怎么办（检查最大技能等级 ）
* 将技能的粒度缩小 即用技能效果合成技能（ok 需要多次check）
* 管理属性buff的command map（ok 需要多次check）
* 在技能表中添加技能的目标类型 (ok 需要多次 check)
* 现在使用的药品属性buff要做同步(ok 需要多次check)
* 怪物死亡，所有冷却全部清理（ok 需要多次check）
* 查看玩家的详细信息是发一个协议（是）
* 查看地图中的概略信息也需要发协议查看吗？（是）
* 玩家死亡后无法使用技能 (ok )
* 玩家死亡后退出地图 再进地图是否需要继续之前的复活cd ??(先全部清除，不需要之前的cd)
* show all 的时候要显示血条（ok）
* 测试一下两个玩家在同一个地图中杀怪（ok uncheck）
* CreatureUnit里不必放技能栏信息 ??!!!! （放着比较好，在一个线程修改，在另一个线程读取可能会报错）
* 加属性buff技能要能作用在玩家身上（ok）
* 开服的时候初始化技能效果，就不用重复init了(ok)
* 怪物死亡有掉落物 掉落物的随机处理（ok uncheck）
* 如果技能有两个效果 第一个效果怪物就死了 那么怎么处理第二个效果（ok）
* 从玩家身上获取到buffid可以获取其buff效果（ok uncheck 可增加一个map来管理buff的信息）
* 如果在配置表中增加了技能该怎么办(不做 将所有的技能清除 让玩家重新学习 这里先不做 可能清除的条件比较复杂)
* 战斗单元更改地图 player所在地图也要更改(ok uncheck)
* 升级时场景里玩家角色的当前血量和蓝量回满(ok)
* 战斗同步 升级 穿装备 脱装备 使用了道具加属性 
* TODO:这里做通过技能效果的组合   ( * 顺序*)  将技能的实现在玩家身上，这里需要问一下
* 查看玩家的状态 是否要在客户端保存一份 (要！保存一份，最好再玩家登录的时候就发一份)
* 可以获取玩家身上有哪些效果 包括使用要的buff和战斗中技能的buff（ok）
* 同一个buff施加在同一个单位上 怎么操作？？（效果的替换或叠加） 只做了替换
* 使用新的定时器框架（暂时先这样用）
* 百度一些现在的定时器能否调时间  通过调整时间可以立即执行 延期执行的任务
（quartz定时器用起来太复杂 不够灵活）
* 怪物会反击：怪物会一直普通攻击第一个打他的玩家，如果玩家离开他的范围
   则停止攻击，直到又有其他玩家打他（太复杂 做成gm指令）
* 查看unit身上的buff（ok 1）
* 持续减血效果的叠加 （只要是两种不同的效果就不会影响，如果是相同的效果 考虑替换或叠加）
* changemap中的isChangeMap这个变量为什么要用原子类（在一个线程修改，在另一个线程读取可能会报错）
* 检查creatureUnit中的各种map是否有清除管理（ok）
* 检查changemap 的时候会看到前一个地图的显示信息（ok）
* 在野外图设置了玩家不能被攻击 有点坑 要改过来（ok）
* move 操作场景中的unit
* 检查useskill(2)
* 检查learnSkill upgradeSkill(2)
* 检查技能效果（2）


* 分线的概念 添加sceneId（不做）
* 体现攻速（不做）
* 复活 恢复百分之多少的血（不做）
* 造成最大的伤害的人以其中的比例回血 即根据之前的效果影响该技能的其他效果
  (可做一个SkillUseContext来存使用一次技能过程中效果 需要其他效果的参数 来解决)

* 再创建一个地图专门用来玩家战斗d（没做）
* 技能效果当中，专门用一个方法来做效果失效 这样用起来更方便 （现在暂时在定时器内部让效果失效，）
技能上下文
触发点，需要在效果 初始化的时候初始化
触发点可能是在玩家被攻击的时候触发的 所以每个触发点 都需要遍历可能会被影响的unit的技能效果 查看是否会被触发 如果触发则做触发
生效的效果


### 开发计划
16号评审



## 第四阶段
* 如果怪物死的时候，刚好副本倒计时结束怎么办（所以在副本到计时结束的时候不要去做结算，结算完之后清除副本数据并取消倒计时，结算的触发点只在怪物死亡的时候）
* 一天只能挑战一次或者只有挑战成功才能扣次数
* 服务器中玩家的排名 使用优先队列
* 希望之塔需要查看再地图上显示出来
* 发奖时背包满的处理
* cd是抛再场景中的吗
* 将playerUnit放入缓存中 如果玩家退出登录再进入游戏，那么技能cd也就没有了
场景中的cd应该需要带入其他的场景中
* 在退出地图的时候升级了场景同步事件 玩家升级事件的同步问题 应该再地图里发奖 再回到新手村
* 能否进入地图

* 副本可以推出 副本切副本
* 在副本中玩家不能离开
* 玩家自己死了 结算
如果要再副本中退出，则可以通过 调用doEnd 

使用spring实现每天的定时任务


### 需要思考的问题
* 为什么要用message.xml这种协议id与协议相对应的形式
* 答：一刀中是会自动注册协议，加这个是为了提前定义bean这个解析器，防止同时传来这个协议时会保存
* 本项目没有实现自动注册，所以加这个来解析协议将协议id和协议联系上
* 买《Effective java》书看

AOI 服务器的实现
